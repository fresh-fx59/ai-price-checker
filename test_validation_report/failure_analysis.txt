PRICE MONITOR - FAILURE ANALYSIS REPORT
=============================================

Generated: 2025-08-12 00:21:25

FAILURE SUMMARY:
-----------------
Failed Tests: 15
Error Tests: 16
Total Issues: 31

DETAILED FAILURE ANALYSIS:
----------------------------

Module: tests.test_comprehensive_validation
===========================================

FAILURES:
----------
Test: test_daily_price_check_workflow (tests.test_comprehensive_validation.TestRequirement2AutomaticDailyChecks.test_daily_price_check_workflow)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_comprehensive_validation.py", line 297, in test_daily_price_check_workflow
    self.assertTrue(check_result.success)
AssertionError: False is not true

Stdout:
2025-08-11 23:56:52,870 - src.main - INFO - Basic logging initialized
2025-08-11 23:56:52,870 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-11 23:56:52,870 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpgizqpd7v/validation_config.properties
2025-08-11 23:56:52,870 - src.main - INFO - Log level set to: INFO
2025-08-11 23:56:52,871 - src.main - INFO - Additional log file: logs/price_monitor.log
2025-08-11 23:56:52,871 - src.main - INFO - Configuration loaded successfully
2025-08-11 23:56:52,871 - src.main - INFO - Initializing comprehensive logging service...
2025-08-11 23:56:52,871 - src.services.logging_service - INFO - Logging service initialized
2025-08-11 23:56:52,871 - src.main - INFO - Comprehensive logging service initialized
2025-08-11 23:56:52,871 - src.main - INFO - Initializing database...
Database initialized at: sqlite:////var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpgizqpd7v/validation_database.db
2025-08-11 23:56:52,874 - src.main - INFO - Database initialized: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpgizqpd7v/validation_database.db
2025-08-11 23:56:52,874 - src.main - INFO - Initializing services...
2025-08-11 23:56:52,874 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-11 23:56:52,874 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-11 23:56:52,894 - src.services.email_service - ERROR - Email connection test failed: [Errno 8] nodename nor servname provided, or not known
2025-08-11 23:56:52,895 - src.main - WARNING - Email service initialized but connection test failed: Email connection test failed: [Errno 8] nodename nor servname provided, or not known
2025-08-11 23:56:52,895 - src.main - INFO - All services initialized successfully
2025-08-11 23:56:52,895 - src.main - INFO - Initializing Flask application...
2025-08-11 23:56:52,896 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-11 23:56:52,896 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-11 23:56:52,896 - src.security.security_service - INFO - mTLS disabled, skipping certificate loading
2025-08-11 23:56:52,899 - src.main - INFO - Flask application initialized
2025-08-11 23:56:52,899 - src.main - INFO - Starting price monitoring scheduler...
2025-08-11 23:56:52,899 - src.services.price_monitor_service - INFO - Scheduled daily price checks at 09:00
2025-08-11 23:56:52,899 - src.services.price_monitor_service - INFO - Price monitoring scheduler started
2025-08-11 23:56:52,899 - src.main - INFO - Price monitoring scheduler started (daily at 09:00)
2025-08-11 23:56:52,900 - src.main - INFO - Scheduled daily logging data cleanup at 02:00
2025-08-11 23:56:52,900 - src.main - INFO - Price Monitor application initialized successfully
2025-08-11 23:56:52,900 - src.services.parser_service - INFO - Starting product parsing for URL: https://example.com/product/1
2025-08-11 23:56:52,900 - src.services.parser_service - INFO - Attempting to parse with StructuredDataParser
2025-08-11 23:56:52,900 - src.parsers.product_parser.StructuredDataParser - INFO - Successfully parsed structured data: Premium Test Widget - $149.99
2025-08-11 23:56:52,900 - src.services.parser_service - INFO - Parser StructuredDataParser succeeded with confidence 0.9
2025-08-11 23:56:52,900 - src.services.parser_service - INFO - High confidence result from StructuredDataParser, stopping
2025-08-11 23:56:52,901 - src.services.parser_service - INFO - Best parsing result from StructuredDataParser with confidence 0.9
2025-08-11 23:56:52,907 - src.services.price_monitor_service - INFO - Checking price for product: Premium Test Widget (https://example.com/product/1)
2025-08-11 23:56:52,907 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/1 (attempt 1)
2025-08-11 23:56:54,002 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/1: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:56:54,002 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/1: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:56:54,002 - src.services.price_monitor_service - WARNING - Price check failed for product 1 (attempt 1): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:56:54,003 - src.services.price_monitor_service - INFO - Retrying https://example.com/product/1 in 1.0 seconds (attempt 2/4)
2025-08-11 23:56:55,008 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/1 (attempt 1)
2025-08-11 23:56:55,158 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/1: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:56:55,158 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/1: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:56:55,158 - src.services.price_monitor_service - WARNING - Price check failed for product 1 (attempt 2): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:56:55,158 - src.services.price_monitor_service - INFO - Retrying https://example.com/product/1 in 2.0 seconds (attempt 3/4)
2025-08-11 23:56:57,163 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/1 (attempt 1)
2025-08-11 23:56:57,309 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/1: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:56:57,309 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/1: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:56:57,309 - src.services.price_monitor_service - WARNING - Price check failed for product 1 (attempt 3): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:56:57,309 - src.services.price_monitor_service - INFO - Retrying https://example.com/product/1 in 4.0 seconds (attempt 4/4)
2025-08-11 23:57:01,315 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/1 (attempt 1)
2025-08-11 23:57:01,453 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/1: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:01,454 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/1: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:01,454 - src.services.price_monitor_service - WARNING - Price check failed for product 1 (attempt 4): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:01,454 - src.services.price_monitor_service - ERROR - Product 1 (https://example.com/product/1) failed all 4 attempts. Total consecutive failures: 4
2025-08-11 23:57:01,454 - src.services.logging_service - INFO - Performance metric: price_check
2025-08-11 23:57:01,455 - src.main - INFO - Initiating graceful shutdown...
2025-08-11 23:57:06,460 - src.services.price_monitor_service - INFO - Price monitoring scheduler stopped
2025-08-11 23:57:06,460 - src.main - ERROR - Error closing database: 'DatabaseManager' object has no attribute 'close'
2025-08-11 23:57:06,461 - src.main - INFO - Graceful shutdown completed

----------------------------------------
Test: test_multiple_products_checking (tests.test_comprehensive_validation.TestRequirement2AutomaticDailyChecks.test_multiple_products_checking)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_comprehensive_validation.py", line 359, in test_multiple_products_checking
    self.assertEqual(mock_scraping_instance.fetch_page_content.call_count, 4)  # 2 for adding + 2 for checking
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: 0 != 4

Stdout:
2025-08-11 23:57:06,463 - src.main - INFO - Basic logging initialized
2025-08-11 23:57:06,463 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-11 23:57:06,463 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpgizqpd7v/validation_config.properties
2025-08-11 23:57:06,463 - src.main - INFO - Log level set to: INFO
2025-08-11 23:57:06,463 - src.main - INFO - Additional log file: logs/price_monitor.log
2025-08-11 23:57:06,463 - src.main - INFO - Configuration loaded successfully
2025-08-11 23:57:06,463 - src.main - INFO - Initializing comprehensive logging service...
2025-08-11 23:57:06,464 - src.services.logging_service - INFO - Logging service initialized
2025-08-11 23:57:06,464 - src.main - INFO - Comprehensive logging service initialized
2025-08-11 23:57:06,464 - src.main - INFO - Initializing database...
Database initialized at: sqlite:////var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpgizqpd7v/validation_database.db
2025-08-11 23:57:06,466 - src.main - INFO - Database initialized: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpgizqpd7v/validation_database.db
2025-08-11 23:57:06,466 - src.main - INFO - Initializing services...
2025-08-11 23:57:06,466 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-11 23:57:06,466 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-11 23:57:06,488 - src.services.email_service - ERROR - Email connection test failed: [Errno 8] nodename nor servname provided, or not known
2025-08-11 23:57:06,489 - src.main - WARNING - Email service initialized but connection test failed: Email connection test failed: [Errno 8] nodename nor servname provided, or not known
2025-08-11 23:57:06,489 - src.main - INFO - All services initialized successfully
2025-08-11 23:57:06,489 - src.main - INFO - Initializing Flask application...
2025-08-11 23:57:06,490 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-11 23:57:06,490 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-11 23:57:06,490 - src.security.security_service - INFO - mTLS disabled, skipping certificate loading
2025-08-11 23:57:06,492 - src.main - INFO - Flask application initialized
2025-08-11 23:57:06,492 - src.main - INFO - Starting price monitoring scheduler...
2025-08-11 23:57:06,492 - src.services.price_monitor_service - INFO - Scheduled daily price checks at 09:00
2025-08-11 23:57:06,493 - src.services.price_monitor_service - INFO - Price monitoring scheduler started
2025-08-11 23:57:06,493 - src.main - INFO - Price monitoring scheduler started (daily at 09:00)
2025-08-11 23:57:06,493 - src.main - INFO - Scheduled daily logging data cleanup at 02:00
2025-08-11 23:57:06,493 - src.main - INFO - Price Monitor application initialized successfully
2025-08-11 23:57:06,493 - src.services.parser_service - INFO - Starting product parsing for URL: https://example.com/product/1
2025-08-11 23:57:06,493 - src.services.parser_service - INFO - Attempting to parse with StructuredDataParser
2025-08-11 23:57:06,493 - src.parsers.product_parser.StructuredDataParser - INFO - Successfully parsed structured data: Premium Test Widget - $149.99
2025-08-11 23:57:06,494 - src.services.parser_service - INFO - Parser StructuredDataParser succeeded with confidence 0.9
2025-08-11 23:57:06,494 - src.services.parser_service - INFO - High confidence result from StructuredDataParser, stopping
2025-08-11 23:57:06,494 - src.services.parser_service - INFO - Best parsing result from StructuredDataParser with confidence 0.9
2025-08-11 23:57:06,499 - src.services.parser_service - INFO - Starting product parsing for URL: https://example.com/product/2
2025-08-11 23:57:06,500 - src.services.parser_service - INFO - Attempting to parse with StructuredDataParser
2025-08-11 23:57:06,500 - src.parsers.product_parser.StructuredDataParser - INFO - Successfully parsed structured data: Premium Test Widget - $149.99
2025-08-11 23:57:06,500 - src.services.parser_service - INFO - Parser StructuredDataParser succeeded with confidence 0.9
2025-08-11 23:57:06,500 - src.services.parser_service - INFO - High confidence result from StructuredDataParser, stopping
2025-08-11 23:57:06,500 - src.services.parser_service - INFO - Best parsing result from StructuredDataParser with confidence 0.9
2025-08-11 23:57:06,503 - src.services.price_monitor_service - INFO - Starting price check for 2 products
2025-08-11 23:57:06,504 - src.services.price_monitor_service - INFO - Checking price for product: Premium Test Widget (https://example.com/product/2)
2025-08-11 23:57:06,504 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/2 (attempt 1)
2025-08-11 23:57:06,504 - src.services.price_monitor_service - INFO - Checking price for product: Premium Test Widget (https://example.com/product/1)
2025-08-11 23:57:06,505 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/1 (attempt 1)
2025-08-11 23:57:06,985 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/1: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:06,985 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/1: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:06,985 - src.services.price_monitor_service - WARNING - Price check failed for product 1 (attempt 1): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:06,985 - src.services.price_monitor_service - INFO - Retrying https://example.com/product/1 in 1.0 seconds (attempt 2/4)
2025-08-11 23:57:07,565 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/2: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/2
2025-08-11 23:57:07,565 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/2: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/2
2025-08-11 23:57:07,566 - src.services.price_monitor_service - WARNING - Price check failed for product 2 (attempt 1): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/2
2025-08-11 23:57:07,566 - src.services.price_monitor_service - INFO - Retrying https://example.com/product/2 in 1.0 seconds (attempt 2/4)
2025-08-11 23:57:07,989 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/1 (attempt 1)
2025-08-11 23:57:08,168 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/1: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:08,168 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/1: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:08,168 - src.services.price_monitor_service - WARNING - Price check failed for product 1 (attempt 2): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:08,168 - src.services.price_monitor_service - INFO - Retrying https://example.com/product/1 in 2.0 seconds (attempt 3/4)
2025-08-11 23:57:08,571 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/2 (attempt 1)
2025-08-11 23:57:08,793 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/2: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/2
2025-08-11 23:57:08,797 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/2: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/2
2025-08-11 23:57:08,797 - src.services.price_monitor_service - WARNING - Price check failed for product 2 (attempt 2): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/2
2025-08-11 23:57:08,797 - src.services.price_monitor_service - INFO - Retrying https://example.com/product/2 in 2.0 seconds (attempt 3/4)
2025-08-11 23:57:10,173 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/1 (attempt 1)
2025-08-11 23:57:10,327 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/1: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:10,327 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/1: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:10,327 - src.services.price_monitor_service - WARNING - Price check failed for product 1 (attempt 3): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:10,327 - src.services.price_monitor_service - INFO - Retrying https://example.com/product/1 in 4.0 seconds (attempt 4/4)
2025-08-11 23:57:10,802 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/2 (attempt 1)
2025-08-11 23:57:10,983 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/2: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/2
2025-08-11 23:57:10,983 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/2: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/2
2025-08-11 23:57:10,983 - src.services.price_monitor_service - WARNING - Price check failed for product 2 (attempt 3): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/2
2025-08-11 23:57:10,984 - src.services.price_monitor_service - INFO - Retrying https://example.com/product/2 in 4.0 seconds (attempt 4/4)
2025-08-11 23:57:14,332 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/1 (attempt 1)
2025-08-11 23:57:14,486 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/1: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:14,486 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/1: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:14,486 - src.services.price_monitor_service - WARNING - Price check failed for product 1 (attempt 4): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:14,486 - src.services.price_monitor_service - ERROR - Product 1 (https://example.com/product/1) failed all 4 attempts. Total consecutive failures: 4
2025-08-11 23:57:14,486 - src.services.logging_service - INFO - Performance metric: price_check
2025-08-11 23:57:14,986 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/2 (attempt 1)
2025-08-11 23:57:15,138 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/2: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/2
2025-08-11 23:57:15,138 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/2: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/2
2025-08-11 23:57:15,138 - src.services.price_monitor_service - WARNING - Price check failed for product 2 (attempt 4): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/2
2025-08-11 23:57:15,138 - src.services.price_monitor_service - ERROR - Product 2 (https://example.com/product/2) failed all 4 attempts. Total consecutive failures: 4
2025-08-11 23:57:15,138 - src.services.logging_service - INFO - Performance metric: price_check
2025-08-11 23:57:15,139 - src.services.price_monitor_service - INFO - Price check completed: 0/2 successful, 0 price drops, 0 new lowest prices, 0 notifications sent, 0 notification failures, duration: 8.6s
2025-08-11 23:57:15,140 - src.main - INFO - Initiating graceful shutdown...
2025-08-11 23:57:20,148 - src.services.price_monitor_service - INFO - Price monitoring scheduler stopped
2025-08-11 23:57:20,149 - src.main - ERROR - Error closing database: 'DatabaseManager' object has no attribute 'close'
2025-08-11 23:57:20,149 - src.main - INFO - Graceful shutdown completed

----------------------------------------
Test: test_price_drop_email_notification (tests.test_comprehensive_validation.TestRequirement3EmailNotifications.test_price_drop_email_notification)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_comprehensive_validation.py", line 403, in test_price_drop_email_notification
    self.assertTrue(check_result.success)
AssertionError: False is not true

Stdout:
2025-08-11 23:57:20,151 - src.main - INFO - Basic logging initialized
2025-08-11 23:57:20,151 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-11 23:57:20,151 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmp34ryq409/validation_config.properties
2025-08-11 23:57:20,152 - src.main - INFO - Log level set to: INFO
2025-08-11 23:57:20,152 - src.main - INFO - Additional log file: logs/price_monitor.log
2025-08-11 23:57:20,152 - src.main - INFO - Configuration loaded successfully
2025-08-11 23:57:20,152 - src.main - INFO - Initializing comprehensive logging service...
2025-08-11 23:57:20,152 - src.services.logging_service - INFO - Logging service initialized
2025-08-11 23:57:20,152 - src.main - INFO - Comprehensive logging service initialized
2025-08-11 23:57:20,152 - src.main - INFO - Initializing database...
Database initialized at: sqlite:////var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmp34ryq409/validation_database.db
2025-08-11 23:57:20,154 - src.main - INFO - Database initialized: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmp34ryq409/validation_database.db
2025-08-11 23:57:20,154 - src.main - INFO - Initializing services...
2025-08-11 23:57:20,154 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-11 23:57:20,154 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-11 23:57:20,177 - src.services.email_service - ERROR - Email connection test failed: 'Mock' object does not support the context manager protocol
2025-08-11 23:57:20,179 - src.main - WARNING - Email service initialized but connection test failed: Email connection test failed: 'Mock' object does not support the context manager protocol
2025-08-11 23:57:20,179 - src.main - INFO - All services initialized successfully
2025-08-11 23:57:20,179 - src.main - INFO - Initializing Flask application...
2025-08-11 23:57:20,180 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-11 23:57:20,180 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-11 23:57:20,180 - src.security.security_service - INFO - mTLS disabled, skipping certificate loading
2025-08-11 23:57:20,182 - src.main - INFO - Flask application initialized
2025-08-11 23:57:20,182 - src.main - INFO - Starting price monitoring scheduler...
2025-08-11 23:57:20,182 - src.services.price_monitor_service - INFO - Scheduled daily price checks at 09:00
2025-08-11 23:57:20,182 - src.services.price_monitor_service - INFO - Price monitoring scheduler started
2025-08-11 23:57:20,182 - src.main - INFO - Price monitoring scheduler started (daily at 09:00)
2025-08-11 23:57:20,183 - src.main - INFO - Scheduled daily logging data cleanup at 02:00
2025-08-11 23:57:20,183 - src.main - INFO - Price Monitor application initialized successfully
2025-08-11 23:57:20,183 - src.services.parser_service - INFO - Starting product parsing for URL: https://example.com/product/1
2025-08-11 23:57:20,183 - src.services.parser_service - INFO - Attempting to parse with StructuredDataParser
2025-08-11 23:57:20,183 - src.parsers.product_parser.StructuredDataParser - INFO - Successfully parsed structured data: Premium Test Widget - $149.99
2025-08-11 23:57:20,183 - src.services.parser_service - INFO - Parser StructuredDataParser succeeded with confidence 0.9
2025-08-11 23:57:20,183 - src.services.parser_service - INFO - High confidence result from StructuredDataParser, stopping
2025-08-11 23:57:20,183 - src.services.parser_service - INFO - Best parsing result from StructuredDataParser with confidence 0.9
2025-08-11 23:57:20,188 - src.services.price_monitor_service - INFO - Checking price for product: Premium Test Widget (https://example.com/product/1)
2025-08-11 23:57:20,188 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/1 (attempt 1)
2025-08-11 23:57:20,645 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/1: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:20,649 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/1: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:20,649 - src.services.price_monitor_service - WARNING - Price check failed for product 1 (attempt 1): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:20,649 - src.services.price_monitor_service - INFO - Retrying https://example.com/product/1 in 1.0 seconds (attempt 2/4)
2025-08-11 23:57:21,654 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/1 (attempt 1)
2025-08-11 23:57:21,897 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/1: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:21,898 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/1: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:21,898 - src.services.price_monitor_service - WARNING - Price check failed for product 1 (attempt 2): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:21,898 - src.services.price_monitor_service - INFO - Retrying https://example.com/product/1 in 2.0 seconds (attempt 3/4)
2025-08-11 23:57:23,903 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/1 (attempt 1)
2025-08-11 23:57:24,370 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/1: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:24,370 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/1: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:24,370 - src.services.price_monitor_service - WARNING - Price check failed for product 1 (attempt 3): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:24,370 - src.services.price_monitor_service - INFO - Retrying https://example.com/product/1 in 4.0 seconds (attempt 4/4)
2025-08-11 23:57:28,375 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/1 (attempt 1)
2025-08-11 23:57:28,554 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/1: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:28,554 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/1: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:28,555 - src.services.price_monitor_service - WARNING - Price check failed for product 1 (attempt 4): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:28,555 - src.services.price_monitor_service - ERROR - Product 1 (https://example.com/product/1) failed all 4 attempts. Total consecutive failures: 4
2025-08-11 23:57:28,555 - src.services.logging_service - INFO - Performance metric: price_check
2025-08-11 23:57:28,555 - src.main - INFO - Initiating graceful shutdown...
2025-08-11 23:57:33,560 - src.services.price_monitor_service - INFO - Price monitoring scheduler stopped
2025-08-11 23:57:33,560 - src.main - ERROR - Error closing database: 'DatabaseManager' object has no attribute 'close'
2025-08-11 23:57:33,560 - src.main - INFO - Graceful shutdown completed

----------------------------------------
Test: test_missing_configuration_handling (tests.test_comprehensive_validation.TestRequirement4ConfigurationManagement.test_missing_configuration_handling)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_comprehensive_validation.py", line 482, in test_missing_configuration_handling
    with self.assertRaises(Exception) as context:
AssertionError: Exception not raised

Stdout:
2025-08-11 23:57:38,602 - src.main - INFO - Basic logging initialized
2025-08-11 23:57:38,602 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-11 23:57:38,602 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpyq4ktn_t/incomplete_config.properties
2025-08-11 23:57:38,603 - src.main - ERROR - Failed to load configuration: Configuration validation failed:
Configuration Errors:
  - ERROR: smtp_server - SMTP server is required for email notifications
  - ERROR: smtp_username - SMTP username is required for email authentication
  - ERROR: smtp_password - SMTP password is required for email authentication
  - ERROR: recipient_email - Recipient email is required for notifications

----------------------------------------
Test: test_price_history_tracking (tests.test_comprehensive_validation.TestRequirement8PriceHistoryTracking.test_price_history_tracking)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_comprehensive_validation.py", line 679, in test_price_history_tracking
    self.assertEqual(updated_product.current_price, 119.99)
AssertionError: 149.99 != 119.99

Stdout:
2025-08-11 23:57:48,746 - src.main - INFO - Basic logging initialized
2025-08-11 23:57:48,746 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-11 23:57:48,746 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmp44nieda7/validation_config.properties
2025-08-11 23:57:48,747 - src.main - INFO - Log level set to: INFO
2025-08-11 23:57:48,747 - src.main - INFO - Additional log file: logs/price_monitor.log
2025-08-11 23:57:48,747 - src.main - INFO - Configuration loaded successfully
2025-08-11 23:57:48,747 - src.main - INFO - Initializing comprehensive logging service...
2025-08-11 23:57:48,748 - src.services.logging_service - INFO - Logging service initialized
2025-08-11 23:57:48,748 - src.main - INFO - Comprehensive logging service initialized
2025-08-11 23:57:48,748 - src.main - INFO - Initializing database...
Database initialized at: sqlite:////var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmp44nieda7/validation_database.db
2025-08-11 23:57:48,750 - src.main - INFO - Database initialized: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmp44nieda7/validation_database.db
2025-08-11 23:57:48,750 - src.main - INFO - Initializing services...
2025-08-11 23:57:48,750 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-11 23:57:48,750 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-11 23:57:48,774 - src.services.email_service - ERROR - Email connection test failed: [Errno 8] nodename nor servname provided, or not known
2025-08-11 23:57:48,775 - src.main - WARNING - Email service initialized but connection test failed: Email connection test failed: [Errno 8] nodename nor servname provided, or not known
2025-08-11 23:57:48,775 - src.main - INFO - All services initialized successfully
2025-08-11 23:57:48,775 - src.main - INFO - Initializing Flask application...
2025-08-11 23:57:48,776 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-11 23:57:48,776 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-11 23:57:48,776 - src.security.security_service - INFO - mTLS disabled, skipping certificate loading
2025-08-11 23:57:48,778 - src.main - INFO - Flask application initialized
2025-08-11 23:57:48,779 - src.main - INFO - Starting price monitoring scheduler...
2025-08-11 23:57:48,779 - src.services.price_monitor_service - INFO - Scheduled daily price checks at 09:00
2025-08-11 23:57:48,779 - src.services.price_monitor_service - INFO - Price monitoring scheduler started
2025-08-11 23:57:48,779 - src.main - INFO - Price monitoring scheduler started (daily at 09:00)
2025-08-11 23:57:48,779 - src.main - INFO - Scheduled daily logging data cleanup at 02:00
2025-08-11 23:57:48,779 - src.main - INFO - Price Monitor application initialized successfully
2025-08-11 23:57:48,779 - src.services.parser_service - INFO - Starting product parsing for URL: https://example.com/product/1
2025-08-11 23:57:48,779 - src.services.parser_service - INFO - Attempting to parse with StructuredDataParser
2025-08-11 23:57:48,780 - src.parsers.product_parser.StructuredDataParser - INFO - Successfully parsed structured data: Premium Test Widget - $149.99
2025-08-11 23:57:48,780 - src.services.parser_service - INFO - Parser StructuredDataParser succeeded with confidence 0.9
2025-08-11 23:57:48,780 - src.services.parser_service - INFO - High confidence result from StructuredDataParser, stopping
2025-08-11 23:57:48,780 - src.services.parser_service - INFO - Best parsing result from StructuredDataParser with confidence 0.9
2025-08-11 23:57:48,787 - src.services.price_monitor_service - INFO - Checking price for product: Premium Test Widget (https://example.com/product/1)
2025-08-11 23:57:48,787 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/1 (attempt 1)
2025-08-11 23:57:49,252 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/1: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:49,252 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/1: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:49,252 - src.services.price_monitor_service - WARNING - Price check failed for product 1 (attempt 1): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:49,252 - src.services.price_monitor_service - INFO - Retrying https://example.com/product/1 in 1.0 seconds (attempt 2/4)
2025-08-11 23:57:50,257 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/1 (attempt 1)
2025-08-11 23:57:50,404 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/1: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:50,404 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/1: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:50,404 - src.services.price_monitor_service - WARNING - Price check failed for product 1 (attempt 2): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:50,404 - src.services.price_monitor_service - INFO - Retrying https://example.com/product/1 in 2.0 seconds (attempt 3/4)
2025-08-11 23:57:52,405 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/1 (attempt 1)
2025-08-11 23:57:52,553 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/1: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:52,554 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/1: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:52,554 - src.services.price_monitor_service - WARNING - Price check failed for product 1 (attempt 3): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:52,554 - src.services.price_monitor_service - INFO - Retrying https://example.com/product/1 in 4.0 seconds (attempt 4/4)
2025-08-11 23:57:56,559 - src.services.web_scraping_service - INFO - Fetching URL: https://example.com/product/1 (attempt 1)
2025-08-11 23:57:56,893 - src.services.web_scraping_service - WARNING - HTTP error fetching https://example.com/product/1: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:56,893 - src.services.price_monitor_service - ERROR - Scraping failed for https://example.com/product/1: Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:56,893 - src.services.price_monitor_service - WARNING - Price check failed for product 1 (attempt 4): Failed to fetch page: HTTP error 404: 404 Client Error: Not Found for url: https://example.com/product/1
2025-08-11 23:57:56,893 - src.services.price_monitor_service - ERROR - Product 1 (https://example.com/product/1) failed all 4 attempts. Total consecutive failures: 4
2025-08-11 23:57:56,893 - src.services.logging_service - INFO - Performance metric: price_check
2025-08-11 23:57:56,894 - src.main - INFO - Initiating graceful shutdown...
2025-08-11 23:58:01,898 - src.services.price_monitor_service - INFO - Price monitoring scheduler stopped
2025-08-11 23:58:01,898 - src.main - ERROR - Error closing database: 'DatabaseManager' object has no attribute 'close'
2025-08-11 23:58:01,899 - src.main - INFO - Graceful shutdown completed

----------------------------------------
ERRORS:
--------
Test: test_complete_system_integration (tests.test_comprehensive_validation.TestAllRequirementsIntegration.test_complete_system_integration)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_comprehensive_validation.py", line 803, in test_complete_system_integration
    app.product_service.update_price_manually(product.id, 139.99)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ProductService' object has no attribute 'update_price_manually'

Stdout:
2025-08-11 23:56:37,645 - src.main - INFO - Basic logging initialized
2025-08-11 23:56:37,645 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-11 23:56:37,645 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpwniabghw/validation_config.properties
2025-08-11 23:56:37,646 - src.main - INFO - Log level set to: INFO
2025-08-11 23:56:37,646 - src.main - INFO - Additional log file: logs/price_monitor.log
2025-08-11 23:56:37,646 - src.main - INFO - Configuration loaded successfully
2025-08-11 23:56:37,646 - src.main - INFO - Initializing comprehensive logging service...
2025-08-11 23:56:37,646 - src.services.logging_service - INFO - Logging service initialized
2025-08-11 23:56:37,646 - src.main - INFO - Comprehensive logging service initialized
2025-08-11 23:56:37,646 - src.main - INFO - Initializing database...
Database initialized at: sqlite:////var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpwniabghw/validation_database.db
2025-08-11 23:56:37,652 - src.main - INFO - Database initialized: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpwniabghw/validation_database.db
2025-08-11 23:56:37,652 - src.main - INFO - Initializing services...
2025-08-11 23:56:37,652 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-11 23:56:37,652 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-11 23:56:37,669 - src.services.email_service - ERROR - Email connection test failed: 'Mock' object does not support the context manager protocol
2025-08-11 23:56:37,670 - src.main - WARNING - Email service initialized but connection test failed: Email connection test failed: 'Mock' object does not support the context manager protocol
2025-08-11 23:56:37,670 - src.main - INFO - All services initialized successfully
2025-08-11 23:56:37,670 - src.main - INFO - Initializing Flask application...
2025-08-11 23:56:37,671 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-11 23:56:37,671 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-11 23:56:37,671 - src.security.security_service - INFO - mTLS disabled, skipping certificate loading
2025-08-11 23:56:37,672 - src.main - INFO - Flask application initialized
2025-08-11 23:56:37,672 - src.main - INFO - Starting price monitoring scheduler...
2025-08-11 23:56:37,673 - src.services.price_monitor_service - INFO - Scheduled daily price checks at 09:00
2025-08-11 23:56:37,673 - src.services.price_monitor_service - INFO - Price monitoring scheduler started
2025-08-11 23:56:37,673 - src.main - INFO - Price monitoring scheduler started (daily at 09:00)
2025-08-11 23:56:37,673 - src.main - INFO - Scheduled daily logging data cleanup at 02:00
2025-08-11 23:56:37,673 - src.main - INFO - Price Monitor application initialized successfully
2025-08-11 23:56:37,673 - src.services.parser_service - INFO - Starting product parsing for URL: https://example.com/product/1
2025-08-11 23:56:37,673 - src.services.parser_service - INFO - Attempting to parse with StructuredDataParser
2025-08-11 23:56:37,674 - src.parsers.product_parser.StructuredDataParser - INFO - Successfully parsed structured data: Premium Test Widget - $149.99
2025-08-11 23:56:37,674 - src.services.parser_service - INFO - Parser StructuredDataParser succeeded with confidence 0.9
2025-08-11 23:56:37,674 - src.services.parser_service - INFO - High confidence result from StructuredDataParser, stopping
2025-08-11 23:56:37,674 - src.services.parser_service - INFO - Best parsing result from StructuredDataParser with confidence 0.9
2025-08-11 23:56:37,683 - src.main - INFO - Initiating graceful shutdown...
2025-08-11 23:56:42,688 - src.services.price_monitor_service - INFO - Price monitoring scheduler stopped
2025-08-11 23:56:42,688 - src.main - ERROR - Error closing database: 'DatabaseManager' object has no attribute 'close'
2025-08-11 23:56:42,688 - src.main - INFO - Graceful shutdown completed

----------------------------------------
Test: test_manual_price_update_workflow (tests.test_comprehensive_validation.TestRequirement7ManualPriceUpdates.test_manual_price_update_workflow)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_comprehensive_validation.py", line 608, in test_manual_price_update_workflow
    update_result = app.product_service.update_price_manually(product.id, manual_price)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ProductService' object has no attribute 'update_price_manually'

Stdout:
2025-08-11 23:57:43,703 - src.main - INFO - Basic logging initialized
2025-08-11 23:57:43,703 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-11 23:57:43,703 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpjjcyfp3a/validation_config.properties
2025-08-11 23:57:43,703 - src.main - INFO - Log level set to: INFO
2025-08-11 23:57:43,703 - src.main - INFO - Additional log file: logs/price_monitor.log
2025-08-11 23:57:43,703 - src.main - INFO - Configuration loaded successfully
2025-08-11 23:57:43,703 - src.main - INFO - Initializing comprehensive logging service...
2025-08-11 23:57:43,704 - src.services.logging_service - INFO - Logging service initialized
2025-08-11 23:57:43,704 - src.main - INFO - Comprehensive logging service initialized
2025-08-11 23:57:43,704 - src.main - INFO - Initializing database...
Database initialized at: sqlite:////var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpjjcyfp3a/validation_database.db
2025-08-11 23:57:43,707 - src.main - INFO - Database initialized: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpjjcyfp3a/validation_database.db
2025-08-11 23:57:43,707 - src.main - INFO - Initializing services...
2025-08-11 23:57:43,707 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-11 23:57:43,707 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-11 23:57:43,726 - src.services.email_service - ERROR - Email connection test failed: 'Mock' object does not support the context manager protocol
2025-08-11 23:57:43,727 - src.main - WARNING - Email service initialized but connection test failed: Email connection test failed: 'Mock' object does not support the context manager protocol
2025-08-11 23:57:43,727 - src.main - INFO - All services initialized successfully
2025-08-11 23:57:43,727 - src.main - INFO - Initializing Flask application...
2025-08-11 23:57:43,728 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-11 23:57:43,728 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-11 23:57:43,728 - src.security.security_service - INFO - mTLS disabled, skipping certificate loading
2025-08-11 23:57:43,730 - src.main - INFO - Flask application initialized
2025-08-11 23:57:43,730 - src.main - INFO - Starting price monitoring scheduler...
2025-08-11 23:57:43,730 - src.services.price_monitor_service - INFO - Scheduled daily price checks at 09:00
2025-08-11 23:57:43,730 - src.services.price_monitor_service - INFO - Price monitoring scheduler started
2025-08-11 23:57:43,730 - src.main - INFO - Price monitoring scheduler started (daily at 09:00)
2025-08-11 23:57:43,730 - src.main - INFO - Scheduled daily logging data cleanup at 02:00
2025-08-11 23:57:43,731 - src.main - INFO - Price Monitor application initialized successfully
2025-08-11 23:57:43,731 - src.services.parser_service - INFO - Starting product parsing for URL: https://example.com/product/1
2025-08-11 23:57:43,731 - src.services.parser_service - INFO - Attempting to parse with StructuredDataParser
2025-08-11 23:57:43,731 - src.parsers.product_parser.StructuredDataParser - INFO - Successfully parsed structured data: Premium Test Widget - $149.99
2025-08-11 23:57:43,731 - src.services.parser_service - INFO - Parser StructuredDataParser succeeded with confidence 0.9
2025-08-11 23:57:43,731 - src.services.parser_service - INFO - High confidence result from StructuredDataParser, stopping
2025-08-11 23:57:43,731 - src.services.parser_service - INFO - Best parsing result from StructuredDataParser with confidence 0.9
2025-08-11 23:57:43,736 - src.main - INFO - Initiating graceful shutdown...
2025-08-11 23:57:48,741 - src.services.price_monitor_service - INFO - Price monitoring scheduler stopped
2025-08-11 23:57:48,742 - src.main - ERROR - Error closing database: 'DatabaseManager' object has no attribute 'close'
2025-08-11 23:57:48,742 - src.main - INFO - Graceful shutdown completed

----------------------------------------

Module: tests.test_end_to_end_integration
=========================================

FAILURES:
----------
Test: test_mtls_configuration_loading (tests.test_end_to_end_integration.TestMTLSSecurityIntegration.test_mtls_configuration_loading)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_end_to_end_integration.py", line 499, in test_mtls_configuration_loading
    mock_security_service.assert_called_once()
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/unittest/mock.py", line 923, in assert_called_once
    raise AssertionError(msg)
AssertionError: Expected 'SecurityService' to have been called once. Called 0 times.

Stdout:
2025-08-12 00:00:40,548 - src.main - INFO - Basic logging initialized
2025-08-12 00:00:40,548 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-12 00:00:40,549 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpsptjp__y/mtls_config.properties
2025-08-12 00:00:40,549 - src.main - INFO - Log level set to: INFO
2025-08-12 00:00:40,549 - src.main - INFO - Additional log file: logs/price_monitor.log
2025-08-12 00:00:40,549 - src.main - INFO - Configuration loaded successfully
2025-08-12 00:00:40,549 - src.main - INFO - Initializing comprehensive logging service...
2025-08-12 00:00:40,550 - src.services.logging_service - INFO - Logging service initialized
2025-08-12 00:00:40,550 - src.main - INFO - Comprehensive logging service initialized
2025-08-12 00:00:40,550 - src.main - INFO - Initializing database...
Database initialized at: sqlite:////var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpsptjp__y/test_database.db
2025-08-12 00:00:40,553 - src.main - INFO - Database initialized: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpsptjp__y/test_database.db
2025-08-12 00:00:40,553 - src.main - INFO - Initializing services...
2025-08-12 00:00:40,553 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:00:40,553 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:02:51,239 - src.services.email_service - ERROR - Email connection test failed: Connection unexpectedly closed
2025-08-12 00:02:51,241 - src.main - WARNING - Email service initialized but connection test failed: Email connection test failed: Connection unexpectedly closed
2025-08-12 00:02:51,241 - src.main - INFO - All services initialized successfully
2025-08-12 00:02:51,241 - src.main - INFO - Initializing Flask application...
2025-08-12 00:02:51,243 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:02:51,243 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:02:51,244 - src.security.security_service - INFO - Successfully loaded certificate bundle
2025-08-12 00:02:51,248 - src.main - INFO - Flask application initialized
2025-08-12 00:02:51,248 - src.main - INFO - Starting price monitoring scheduler...
2025-08-12 00:02:51,248 - src.services.price_monitor_service - INFO - Scheduled daily price checks at 09:00
2025-08-12 00:02:51,249 - src.services.price_monitor_service - INFO - Price monitoring scheduler started
2025-08-12 00:02:51,249 - src.main - INFO - Price monitoring scheduler started (daily at 09:00)
2025-08-12 00:02:51,249 - src.main - INFO - Scheduled daily logging data cleanup at 02:00
2025-08-12 00:02:51,249 - src.main - INFO - Price Monitor application initialized successfully
2025-08-12 00:02:51,249 - src.main - INFO - Initiating graceful shutdown...
2025-08-12 00:02:56,254 - src.services.price_monitor_service - INFO - Price monitoring scheduler stopped
2025-08-12 00:02:56,255 - src.main - ERROR - Error closing database: 'DatabaseManager' object has no attribute 'close'
2025-08-12 00:02:56,255 - src.main - INFO - Graceful shutdown completed

----------------------------------------
ERRORS:
--------
Test: test_complete_product_monitoring_workflow (tests.test_end_to_end_integration.TestCompleteWorkflows.test_complete_product_monitoring_workflow)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_end_to_end_integration.py", line 154, in test_complete_product_monitoring_workflow
    mock_email_instance.send_price_drop_notification.return_value = EmailNotificationResult(
                                                                    ^^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'EmailNotificationResult' is not defined

----------------------------------------
Test: test_manual_price_update_workflow (tests.test_end_to_end_integration.TestCompleteWorkflows.test_manual_price_update_workflow)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_end_to_end_integration.py", line 238, in test_manual_price_update_workflow
    mock_email_instance.send_price_drop_notification.return_value = EmailNotificationResult(
                                                                    ^^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'EmailNotificationResult' is not defined

----------------------------------------
Test: test_multiple_products_monitoring_workflow (tests.test_end_to_end_integration.TestCompleteWorkflows.test_multiple_products_monitoring_workflow)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_end_to_end_integration.py", line 291, in test_multiple_products_monitoring_workflow
    mock_email_instance.send_price_drop_notification.return_value = EmailNotificationResult(
                                                                    ^^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'EmailNotificationResult' is not defined

----------------------------------------
Test: test_automatic_price_drop_notification (tests.test_end_to_end_integration.TestEmailNotificationIntegration.test_automatic_price_drop_notification)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_end_to_end_integration.py", line 551, in test_automatic_price_drop_notification
    product = app.product_service.add_product("https://example.com/product/1")
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ProductService.add_product() missing 2 required positional arguments: 'name' and 'price'

Stdout:
2025-08-12 00:00:25,437 - src.main - INFO - Basic logging initialized
2025-08-12 00:00:25,437 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-12 00:00:25,437 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpx9hrx5sl/test_config.properties
2025-08-12 00:00:25,437 - src.main - INFO - Log level set to: INFO
2025-08-12 00:00:25,437 - src.main - INFO - Additional log file: logs/price_monitor.log
2025-08-12 00:00:25,437 - src.main - INFO - Configuration loaded successfully
2025-08-12 00:00:25,437 - src.main - INFO - Initializing comprehensive logging service...
2025-08-12 00:00:25,438 - src.services.logging_service - INFO - Logging service initialized
2025-08-12 00:00:25,438 - src.main - INFO - Comprehensive logging service initialized
2025-08-12 00:00:25,438 - src.main - INFO - Initializing database...
Database initialized at: sqlite:////var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpx9hrx5sl/test_database.db
2025-08-12 00:00:25,440 - src.main - INFO - Database initialized: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpx9hrx5sl/test_database.db
2025-08-12 00:00:25,440 - src.main - INFO - Initializing services...
2025-08-12 00:00:25,441 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:00:25,441 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:00:25,458 - src.services.email_service - ERROR - Email connection test failed: 'Mock' object does not support the context manager protocol
2025-08-12 00:00:25,459 - src.main - WARNING - Email service initialized but connection test failed: Email connection test failed: 'Mock' object does not support the context manager protocol
2025-08-12 00:00:25,459 - src.main - INFO - All services initialized successfully
2025-08-12 00:00:25,459 - src.main - INFO - Initializing Flask application...
2025-08-12 00:00:25,460 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:00:25,460 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:00:25,460 - src.security.security_service - INFO - mTLS disabled, skipping certificate loading
2025-08-12 00:00:25,462 - src.main - INFO - Flask application initialized
2025-08-12 00:00:25,462 - src.main - INFO - Starting price monitoring scheduler...
2025-08-12 00:00:25,462 - src.services.price_monitor_service - INFO - Scheduled daily price checks at 09:00
2025-08-12 00:00:25,462 - src.services.price_monitor_service - INFO - Price monitoring scheduler started
2025-08-12 00:00:25,463 - src.main - INFO - Price monitoring scheduler started (daily at 09:00)
2025-08-12 00:00:25,463 - src.main - INFO - Scheduled daily logging data cleanup at 02:00
2025-08-12 00:00:25,463 - src.main - INFO - Price Monitor application initialized successfully
2025-08-12 00:00:25,463 - src.main - INFO - Initiating graceful shutdown...
2025-08-12 00:00:30,468 - src.services.price_monitor_service - INFO - Price monitoring scheduler stopped
2025-08-12 00:00:30,469 - src.main - ERROR - Error closing database: 'DatabaseManager' object has no attribute 'close'
2025-08-12 00:00:30,469 - src.main - INFO - Graceful shutdown completed

----------------------------------------
Test: test_email_failure_handling (tests.test_end_to_end_integration.TestEmailNotificationIntegration.test_email_failure_handling)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_end_to_end_integration.py", line 644, in test_email_failure_handling
    product = app.product_service.add_product("https://example.com/product/1")
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ProductService.add_product() missing 2 required positional arguments: 'name' and 'price'

Stdout:
2025-08-12 00:00:30,472 - src.main - INFO - Basic logging initialized
2025-08-12 00:00:30,472 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-12 00:00:30,472 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpx9hrx5sl/test_config.properties
2025-08-12 00:00:30,473 - src.main - INFO - Log level set to: INFO
2025-08-12 00:00:30,473 - src.main - INFO - Additional log file: logs/price_monitor.log
2025-08-12 00:00:30,473 - src.main - INFO - Configuration loaded successfully
2025-08-12 00:00:30,473 - src.main - INFO - Initializing comprehensive logging service...
2025-08-12 00:00:30,474 - src.services.logging_service - INFO - Logging service initialized
2025-08-12 00:00:30,475 - src.main - INFO - Comprehensive logging service initialized
2025-08-12 00:00:30,475 - src.main - INFO - Initializing database...
Database initialized at: sqlite:////var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpx9hrx5sl/test_database.db
2025-08-12 00:00:30,477 - src.main - INFO - Database initialized: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpx9hrx5sl/test_database.db
2025-08-12 00:00:30,477 - src.main - INFO - Initializing services...
2025-08-12 00:00:30,478 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:00:30,478 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:00:30,497 - src.services.email_service - ERROR - Email connection test failed: 'Mock' object does not support the context manager protocol
2025-08-12 00:00:30,498 - src.main - WARNING - Email service initialized but connection test failed: Email connection test failed: 'Mock' object does not support the context manager protocol
2025-08-12 00:00:30,498 - src.main - INFO - All services initialized successfully
2025-08-12 00:00:30,498 - src.main - INFO - Initializing Flask application...
2025-08-12 00:00:30,499 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:00:30,499 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:00:30,499 - src.security.security_service - INFO - mTLS disabled, skipping certificate loading
2025-08-12 00:00:30,501 - src.main - INFO - Flask application initialized
2025-08-12 00:00:30,501 - src.main - INFO - Starting price monitoring scheduler...
2025-08-12 00:00:30,501 - src.services.price_monitor_service - INFO - Scheduled daily price checks at 09:00
2025-08-12 00:00:30,501 - src.services.price_monitor_service - INFO - Price monitoring scheduler started
2025-08-12 00:00:30,501 - src.main - INFO - Price monitoring scheduler started (daily at 09:00)
2025-08-12 00:00:30,501 - src.main - INFO - Scheduled daily logging data cleanup at 02:00
2025-08-12 00:00:30,501 - src.main - INFO - Price Monitor application initialized successfully
2025-08-12 00:00:30,502 - src.main - INFO - Initiating graceful shutdown...
2025-08-12 00:00:35,507 - src.services.price_monitor_service - INFO - Price monitoring scheduler stopped
2025-08-12 00:00:35,507 - src.main - ERROR - Error closing database: 'DatabaseManager' object has no attribute 'close'
2025-08-12 00:00:35,507 - src.main - INFO - Graceful shutdown completed

----------------------------------------
Test: test_manual_price_update_notification (tests.test_end_to_end_integration.TestEmailNotificationIntegration.test_manual_price_update_notification)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_end_to_end_integration.py", line 602, in test_manual_price_update_notification
    product = app.product_service.add_product("https://example.com/product/1")
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ProductService.add_product() missing 2 required positional arguments: 'name' and 'price'

Stdout:
2025-08-12 00:00:35,509 - src.main - INFO - Basic logging initialized
2025-08-12 00:00:35,509 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-12 00:00:35,509 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpx9hrx5sl/test_config.properties
2025-08-12 00:00:35,510 - src.main - INFO - Log level set to: INFO
2025-08-12 00:00:35,510 - src.main - INFO - Additional log file: logs/price_monitor.log
2025-08-12 00:00:35,510 - src.main - INFO - Configuration loaded successfully
2025-08-12 00:00:35,510 - src.main - INFO - Initializing comprehensive logging service...
2025-08-12 00:00:35,510 - src.services.logging_service - INFO - Logging service initialized
2025-08-12 00:00:35,510 - src.main - INFO - Comprehensive logging service initialized
2025-08-12 00:00:35,510 - src.main - INFO - Initializing database...
Database initialized at: sqlite:////var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpx9hrx5sl/test_database.db
2025-08-12 00:00:35,514 - src.main - INFO - Database initialized: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpx9hrx5sl/test_database.db
2025-08-12 00:00:35,515 - src.main - INFO - Initializing services...
2025-08-12 00:00:35,515 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:00:35,515 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:00:35,533 - src.services.email_service - ERROR - Email connection test failed: 'Mock' object does not support the context manager protocol
2025-08-12 00:00:35,534 - src.main - WARNING - Email service initialized but connection test failed: Email connection test failed: 'Mock' object does not support the context manager protocol
2025-08-12 00:00:35,534 - src.main - INFO - All services initialized successfully
2025-08-12 00:00:35,534 - src.main - INFO - Initializing Flask application...
2025-08-12 00:00:35,535 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:00:35,535 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:00:35,535 - src.security.security_service - INFO - mTLS disabled, skipping certificate loading
2025-08-12 00:00:35,537 - src.main - INFO - Flask application initialized
2025-08-12 00:00:35,537 - src.main - INFO - Starting price monitoring scheduler...
2025-08-12 00:00:35,537 - src.services.price_monitor_service - INFO - Scheduled daily price checks at 09:00
2025-08-12 00:00:35,538 - src.services.price_monitor_service - INFO - Price monitoring scheduler started
2025-08-12 00:00:35,538 - src.main - INFO - Price monitoring scheduler started (daily at 09:00)
2025-08-12 00:00:35,538 - src.main - INFO - Scheduled daily logging data cleanup at 02:00
2025-08-12 00:00:35,538 - src.main - INFO - Price Monitor application initialized successfully
2025-08-12 00:00:35,538 - src.main - INFO - Initiating graceful shutdown...
2025-08-12 00:00:40,540 - src.services.price_monitor_service - INFO - Price monitoring scheduler stopped
2025-08-12 00:00:40,545 - src.main - ERROR - Error closing database: 'DatabaseManager' object has no attribute 'close'
2025-08-12 00:00:40,545 - src.main - INFO - Graceful shutdown completed

----------------------------------------
Test: test_requirement_1_add_product_urls (tests.test_end_to_end_integration.TestUserRequirementsValidation.test_requirement_1_add_product_urls)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_end_to_end_integration.py", line 695, in test_requirement_1_add_product_urls
    product = app.product_service.add_product(valid_url)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ProductService.add_product() missing 2 required positional arguments: 'name' and 'price'

Stdout:
2025-08-12 00:02:56,263 - src.main - INFO - Basic logging initialized
2025-08-12 00:02:56,263 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-12 00:02:56,263 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_config.properties
2025-08-12 00:02:56,264 - src.main - INFO - Log level set to: INFO
2025-08-12 00:02:56,264 - src.main - INFO - Additional log file: logs/price_monitor.log
2025-08-12 00:02:56,264 - src.main - INFO - Configuration loaded successfully
2025-08-12 00:02:56,264 - src.main - INFO - Initializing comprehensive logging service...
2025-08-12 00:02:56,265 - src.services.logging_service - INFO - Logging service initialized
2025-08-12 00:02:56,265 - src.main - INFO - Comprehensive logging service initialized
2025-08-12 00:02:56,265 - src.main - INFO - Initializing database...
Database initialized at: sqlite:////var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_database.db
2025-08-12 00:02:56,269 - src.main - INFO - Database initialized: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_database.db
2025-08-12 00:02:56,269 - src.main - INFO - Initializing services...
2025-08-12 00:02:56,269 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:02:56,270 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:05:06,406 - src.services.email_service - ERROR - Email connection test failed: Connection unexpectedly closed
2025-08-12 00:05:06,414 - src.main - WARNING - Email service initialized but connection test failed: Email connection test failed: Connection unexpectedly closed
2025-08-12 00:05:06,414 - src.main - INFO - All services initialized successfully
2025-08-12 00:05:06,414 - src.main - INFO - Initializing Flask application...
2025-08-12 00:05:06,416 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:05:06,416 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:05:06,416 - src.security.security_service - INFO - mTLS disabled, skipping certificate loading
2025-08-12 00:05:06,421 - src.main - INFO - Flask application initialized
2025-08-12 00:05:06,421 - src.main - INFO - Starting price monitoring scheduler...
2025-08-12 00:05:06,421 - src.services.price_monitor_service - INFO - Scheduled daily price checks at 09:00
2025-08-12 00:05:06,421 - src.services.price_monitor_service - INFO - Price monitoring scheduler started
2025-08-12 00:05:06,421 - src.main - INFO - Price monitoring scheduler started (daily at 09:00)
2025-08-12 00:05:06,421 - src.main - INFO - Scheduled daily logging data cleanup at 02:00
2025-08-12 00:05:06,421 - src.main - INFO - Price Monitor application initialized successfully
2025-08-12 00:05:06,422 - src.main - INFO - Initiating graceful shutdown...
2025-08-12 00:05:11,425 - src.services.price_monitor_service - INFO - Price monitoring scheduler stopped
2025-08-12 00:05:11,426 - src.main - ERROR - Error closing database: 'DatabaseManager' object has no attribute 'close'
2025-08-12 00:05:11,427 - src.main - INFO - Graceful shutdown completed

----------------------------------------
Test: test_requirement_2_automatic_daily_checks (tests.test_end_to_end_integration.TestUserRequirementsValidation.test_requirement_2_automatic_daily_checks)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_end_to_end_integration.py", line 740, in test_requirement_2_automatic_daily_checks
    product = app.product_service.add_product("https://example.com/product/1")
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ProductService.add_product() missing 2 required positional arguments: 'name' and 'price'

Stdout:
2025-08-12 00:05:11,431 - src.main - INFO - Basic logging initialized
2025-08-12 00:05:11,431 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-12 00:05:11,431 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_config.properties
2025-08-12 00:05:11,432 - src.main - INFO - Log level set to: INFO
2025-08-12 00:05:11,432 - src.main - INFO - Additional log file: logs/price_monitor.log
2025-08-12 00:05:11,432 - src.main - INFO - Configuration loaded successfully
2025-08-12 00:05:11,432 - src.main - INFO - Initializing comprehensive logging service...
2025-08-12 00:05:11,432 - src.services.logging_service - INFO - Logging service initialized
2025-08-12 00:05:11,433 - src.main - INFO - Comprehensive logging service initialized
2025-08-12 00:05:11,433 - src.main - INFO - Initializing database...
Database initialized at: sqlite:////var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_database.db
2025-08-12 00:05:11,435 - src.main - INFO - Database initialized: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_database.db
2025-08-12 00:05:11,435 - src.main - INFO - Initializing services...
2025-08-12 00:05:11,435 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:05:11,435 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:07:21,575 - src.services.email_service - ERROR - Email connection test failed: Connection unexpectedly closed
2025-08-12 00:07:21,578 - src.main - WARNING - Email service initialized but connection test failed: Email connection test failed: Connection unexpectedly closed
2025-08-12 00:07:21,578 - src.main - INFO - All services initialized successfully
2025-08-12 00:07:21,579 - src.main - INFO - Initializing Flask application...
2025-08-12 00:07:21,580 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:07:21,580 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:07:21,580 - src.security.security_service - INFO - mTLS disabled, skipping certificate loading
2025-08-12 00:07:21,584 - src.main - INFO - Flask application initialized
2025-08-12 00:07:21,584 - src.main - INFO - Starting price monitoring scheduler...
2025-08-12 00:07:21,584 - src.services.price_monitor_service - INFO - Scheduled daily price checks at 09:00
2025-08-12 00:07:21,584 - src.services.price_monitor_service - INFO - Price monitoring scheduler started
2025-08-12 00:07:21,585 - src.main - INFO - Price monitoring scheduler started (daily at 09:00)
2025-08-12 00:07:21,585 - src.main - INFO - Scheduled daily logging data cleanup at 02:00
2025-08-12 00:07:21,585 - src.main - INFO - Price Monitor application initialized successfully
2025-08-12 00:07:21,585 - src.main - INFO - Initiating graceful shutdown...
2025-08-12 00:07:26,588 - src.services.price_monitor_service - INFO - Price monitoring scheduler stopped
2025-08-12 00:07:26,589 - src.main - ERROR - Error closing database: 'DatabaseManager' object has no attribute 'close'
2025-08-12 00:07:26,589 - src.main - INFO - Graceful shutdown completed

----------------------------------------
Test: test_requirement_3_email_notifications (tests.test_end_to_end_integration.TestUserRequirementsValidation.test_requirement_3_email_notifications)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_end_to_end_integration.py", line 785, in test_requirement_3_email_notifications
    product = app.product_service.add_product("https://example.com/product/1")
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ProductService.add_product() missing 2 required positional arguments: 'name' and 'price'

Stdout:
2025-08-12 00:07:26,591 - src.main - INFO - Basic logging initialized
2025-08-12 00:07:26,591 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-12 00:07:26,591 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_config.properties
2025-08-12 00:07:26,592 - src.main - INFO - Log level set to: INFO
2025-08-12 00:07:26,592 - src.main - INFO - Additional log file: logs/price_monitor.log
2025-08-12 00:07:26,592 - src.main - INFO - Configuration loaded successfully
2025-08-12 00:07:26,592 - src.main - INFO - Initializing comprehensive logging service...
2025-08-12 00:07:26,593 - src.services.logging_service - INFO - Logging service initialized
2025-08-12 00:07:26,593 - src.main - INFO - Comprehensive logging service initialized
2025-08-12 00:07:26,594 - src.main - INFO - Initializing database...
Database initialized at: sqlite:////var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_database.db
2025-08-12 00:07:26,598 - src.main - INFO - Database initialized: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_database.db
2025-08-12 00:07:26,598 - src.main - INFO - Initializing services...
2025-08-12 00:07:26,598 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:07:26,598 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:07:26,627 - src.services.email_service - ERROR - Email connection test failed: 'Mock' object does not support the context manager protocol
2025-08-12 00:07:26,629 - src.main - WARNING - Email service initialized but connection test failed: Email connection test failed: 'Mock' object does not support the context manager protocol
2025-08-12 00:07:26,629 - src.main - INFO - All services initialized successfully
2025-08-12 00:07:26,629 - src.main - INFO - Initializing Flask application...
2025-08-12 00:07:26,630 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:07:26,630 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:07:26,630 - src.security.security_service - INFO - mTLS disabled, skipping certificate loading
2025-08-12 00:07:26,632 - src.main - INFO - Flask application initialized
2025-08-12 00:07:26,632 - src.main - INFO - Starting price monitoring scheduler...
2025-08-12 00:07:26,632 - src.services.price_monitor_service - INFO - Scheduled daily price checks at 09:00
2025-08-12 00:07:26,633 - src.services.price_monitor_service - INFO - Price monitoring scheduler started
2025-08-12 00:07:26,633 - src.main - INFO - Price monitoring scheduler started (daily at 09:00)
2025-08-12 00:07:26,633 - src.main - INFO - Scheduled daily logging data cleanup at 02:00
2025-08-12 00:07:26,633 - src.main - INFO - Price Monitor application initialized successfully
2025-08-12 00:07:26,633 - src.main - INFO - Initiating graceful shutdown...
2025-08-12 00:07:31,635 - src.services.price_monitor_service - INFO - Price monitoring scheduler stopped
2025-08-12 00:07:31,636 - src.main - ERROR - Error closing database: 'DatabaseManager' object has no attribute 'close'
2025-08-12 00:07:31,636 - src.main - INFO - Graceful shutdown completed

----------------------------------------
Test: test_requirement_6_product_management (tests.test_end_to_end_integration.TestUserRequirementsValidation.test_requirement_6_product_management)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_end_to_end_integration.py", line 893, in test_requirement_6_product_management
    product1 = app.product_service.add_product("https://example.com/product/1")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ProductService.add_product() missing 2 required positional arguments: 'name' and 'price'

Stdout:
2025-08-12 00:12:03,068 - src.main - INFO - Basic logging initialized
2025-08-12 00:12:03,068 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-12 00:12:03,068 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_config.properties
2025-08-12 00:12:03,072 - src.main - INFO - Log level set to: INFO
2025-08-12 00:12:03,072 - src.main - INFO - Additional log file: logs/price_monitor.log
2025-08-12 00:12:03,072 - src.main - INFO - Configuration loaded successfully
2025-08-12 00:12:03,072 - src.main - INFO - Initializing comprehensive logging service...
2025-08-12 00:12:03,074 - src.services.logging_service - INFO - Logging service initialized
2025-08-12 00:12:03,074 - src.main - INFO - Comprehensive logging service initialized
2025-08-12 00:12:03,074 - src.main - INFO - Initializing database...
Database initialized at: sqlite:////var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_database.db
2025-08-12 00:12:03,078 - src.main - INFO - Database initialized: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_database.db
2025-08-12 00:12:03,078 - src.main - INFO - Initializing services...
2025-08-12 00:12:03,079 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:12:03,079 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:14:13,200 - src.services.email_service - ERROR - Email connection test failed: Connection unexpectedly closed
2025-08-12 00:14:13,207 - src.main - WARNING - Email service initialized but connection test failed: Email connection test failed: Connection unexpectedly closed
2025-08-12 00:14:13,208 - src.main - INFO - All services initialized successfully
2025-08-12 00:14:13,208 - src.main - INFO - Initializing Flask application...
2025-08-12 00:14:13,210 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:14:13,210 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:14:13,210 - src.security.security_service - INFO - mTLS disabled, skipping certificate loading
2025-08-12 00:14:13,215 - src.main - INFO - Flask application initialized
2025-08-12 00:14:13,216 - src.main - INFO - Starting price monitoring scheduler...
2025-08-12 00:14:13,216 - src.services.price_monitor_service - INFO - Scheduled daily price checks at 09:00
2025-08-12 00:14:13,216 - src.services.price_monitor_service - INFO - Price monitoring scheduler started
2025-08-12 00:14:13,217 - src.main - INFO - Price monitoring scheduler started (daily at 09:00)
2025-08-12 00:14:13,217 - src.main - INFO - Scheduled daily logging data cleanup at 02:00
2025-08-12 00:14:13,217 - src.main - INFO - Price Monitor application initialized successfully
2025-08-12 00:14:13,217 - src.main - INFO - Initiating graceful shutdown...
2025-08-12 00:14:18,219 - src.services.price_monitor_service - INFO - Price monitoring scheduler stopped
2025-08-12 00:14:18,222 - src.main - ERROR - Error closing database: 'DatabaseManager' object has no attribute 'close'
2025-08-12 00:14:18,222 - src.main - INFO - Graceful shutdown completed

----------------------------------------
Test: test_requirement_7_manual_price_updates (tests.test_end_to_end_integration.TestUserRequirementsValidation.test_requirement_7_manual_price_updates)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_end_to_end_integration.py", line 945, in test_requirement_7_manual_price_updates
    product = app.product_service.add_product("https://example.com/product/1")
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ProductService.add_product() missing 2 required positional arguments: 'name' and 'price'

Stdout:
2025-08-12 00:14:18,225 - src.main - INFO - Basic logging initialized
2025-08-12 00:14:18,226 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-12 00:14:18,226 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_config.properties
2025-08-12 00:14:18,227 - src.main - INFO - Log level set to: INFO
2025-08-12 00:14:18,227 - src.main - INFO - Additional log file: logs/price_monitor.log
2025-08-12 00:14:18,227 - src.main - INFO - Configuration loaded successfully
2025-08-12 00:14:18,227 - src.main - INFO - Initializing comprehensive logging service...
2025-08-12 00:14:18,228 - src.services.logging_service - INFO - Logging service initialized
2025-08-12 00:14:18,228 - src.main - INFO - Comprehensive logging service initialized
2025-08-12 00:14:18,228 - src.main - INFO - Initializing database...
Database initialized at: sqlite:////var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_database.db
2025-08-12 00:14:18,233 - src.main - INFO - Database initialized: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_database.db
2025-08-12 00:14:18,233 - src.main - INFO - Initializing services...
2025-08-12 00:14:18,234 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:14:18,234 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:16:28,366 - src.services.email_service - ERROR - Email connection test failed: Connection unexpectedly closed
2025-08-12 00:16:28,367 - src.main - WARNING - Email service initialized but connection test failed: Email connection test failed: Connection unexpectedly closed
2025-08-12 00:16:28,368 - src.main - INFO - All services initialized successfully
2025-08-12 00:16:28,368 - src.main - INFO - Initializing Flask application...
2025-08-12 00:16:28,370 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:16:28,370 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:16:28,370 - src.security.security_service - INFO - mTLS disabled, skipping certificate loading
2025-08-12 00:16:28,375 - src.main - INFO - Flask application initialized
2025-08-12 00:16:28,375 - src.main - INFO - Starting price monitoring scheduler...
2025-08-12 00:16:28,375 - src.services.price_monitor_service - INFO - Scheduled daily price checks at 09:00
2025-08-12 00:16:28,375 - src.services.price_monitor_service - INFO - Price monitoring scheduler started
2025-08-12 00:16:28,375 - src.main - INFO - Price monitoring scheduler started (daily at 09:00)
2025-08-12 00:16:28,375 - src.main - INFO - Scheduled daily logging data cleanup at 02:00
2025-08-12 00:16:28,375 - src.main - INFO - Price Monitor application initialized successfully
2025-08-12 00:16:28,375 - src.main - INFO - Initiating graceful shutdown...
2025-08-12 00:16:33,379 - src.services.price_monitor_service - INFO - Price monitoring scheduler stopped
2025-08-12 00:16:33,381 - src.main - ERROR - Error closing database: 'DatabaseManager' object has no attribute 'close'
2025-08-12 00:16:33,382 - src.main - INFO - Graceful shutdown completed

----------------------------------------
Test: test_requirement_8_price_history_tracking (tests.test_end_to_end_integration.TestUserRequirementsValidation.test_requirement_8_price_history_tracking)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_end_to_end_integration.py", line 992, in test_requirement_8_price_history_tracking
    product = app.product_service.add_product("https://example.com/product/1")
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ProductService.add_product() missing 2 required positional arguments: 'name' and 'price'

Stdout:
2025-08-12 00:16:33,385 - src.main - INFO - Basic logging initialized
2025-08-12 00:16:33,385 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-12 00:16:33,386 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_config.properties
2025-08-12 00:16:33,387 - src.main - INFO - Log level set to: INFO
2025-08-12 00:16:33,387 - src.main - INFO - Additional log file: logs/price_monitor.log
2025-08-12 00:16:33,387 - src.main - INFO - Configuration loaded successfully
2025-08-12 00:16:33,387 - src.main - INFO - Initializing comprehensive logging service...
2025-08-12 00:16:33,388 - src.services.logging_service - INFO - Logging service initialized
2025-08-12 00:16:33,389 - src.main - INFO - Comprehensive logging service initialized
2025-08-12 00:16:33,389 - src.main - INFO - Initializing database...
Database initialized at: sqlite:////var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_database.db
2025-08-12 00:16:33,393 - src.main - INFO - Database initialized: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_database.db
2025-08-12 00:16:33,394 - src.main - INFO - Initializing services...
2025-08-12 00:16:33,394 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:16:33,394 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:18:43,540 - src.services.email_service - ERROR - Email connection test failed: Connection unexpectedly closed
2025-08-12 00:18:43,541 - src.main - WARNING - Email service initialized but connection test failed: Email connection test failed: Connection unexpectedly closed
2025-08-12 00:18:43,541 - src.main - INFO - All services initialized successfully
2025-08-12 00:18:43,541 - src.main - INFO - Initializing Flask application...
2025-08-12 00:18:43,542 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:18:43,542 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:18:43,543 - src.security.security_service - INFO - mTLS disabled, skipping certificate loading
2025-08-12 00:18:43,545 - src.main - INFO - Flask application initialized
2025-08-12 00:18:43,545 - src.main - INFO - Starting price monitoring scheduler...
2025-08-12 00:18:43,545 - src.services.price_monitor_service - INFO - Scheduled daily price checks at 09:00
2025-08-12 00:18:43,545 - src.services.price_monitor_service - INFO - Price monitoring scheduler started
2025-08-12 00:18:43,546 - src.main - INFO - Price monitoring scheduler started (daily at 09:00)
2025-08-12 00:18:43,546 - src.main - INFO - Scheduled daily logging data cleanup at 02:00
2025-08-12 00:18:43,546 - src.main - INFO - Price Monitor application initialized successfully
2025-08-12 00:18:43,546 - src.main - INFO - Initiating graceful shutdown...
2025-08-12 00:18:48,551 - src.services.price_monitor_service - INFO - Price monitoring scheduler stopped
2025-08-12 00:18:48,552 - src.main - ERROR - Error closing database: 'DatabaseManager' object has no attribute 'close'
2025-08-12 00:18:48,552 - src.main - INFO - Graceful shutdown completed

----------------------------------------
Test: test_requirement_9_ai_parsing_tools (tests.test_end_to_end_integration.TestUserRequirementsValidation.test_requirement_9_ai_parsing_tools)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_end_to_end_integration.py", line 1040, in test_requirement_9_ai_parsing_tools
    product = app.product_service.add_product("https://example.com/product/1")
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ProductService.add_product() missing 2 required positional arguments: 'name' and 'price'

Stdout:
2025-08-12 00:18:48,555 - src.main - INFO - Basic logging initialized
2025-08-12 00:18:48,555 - src.main - INFO - Starting Price Monitor application initialization...
2025-08-12 00:18:48,555 - src.main - INFO - Loading configuration from: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_config.properties
2025-08-12 00:18:48,556 - src.main - INFO - Log level set to: INFO
2025-08-12 00:18:48,556 - src.main - INFO - Additional log file: logs/price_monitor.log
2025-08-12 00:18:48,556 - src.main - INFO - Configuration loaded successfully
2025-08-12 00:18:48,556 - src.main - INFO - Initializing comprehensive logging service...
2025-08-12 00:18:48,557 - src.services.logging_service - INFO - Logging service initialized
2025-08-12 00:18:48,557 - src.main - INFO - Comprehensive logging service initialized
2025-08-12 00:18:48,557 - src.main - INFO - Initializing database...
Database initialized at: sqlite:////var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_database.db
2025-08-12 00:18:48,562 - src.main - INFO - Database initialized: /var/folders/8q/ll98z0714m100_v068bvs_nw0000gn/T/tmpt_i9ig2v/test_database.db
2025-08-12 00:18:48,562 - src.main - INFO - Initializing services...
2025-08-12 00:18:48,562 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:18:48,562 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:20:58,701 - src.services.email_service - ERROR - Email connection test failed: Connection unexpectedly closed
2025-08-12 00:20:58,704 - src.main - WARNING - Email service initialized but connection test failed: Email connection test failed: Connection unexpectedly closed
2025-08-12 00:20:58,704 - src.main - INFO - All services initialized successfully
2025-08-12 00:20:58,704 - src.main - INFO - Initializing Flask application...
2025-08-12 00:20:58,706 - src.services.parser_service - INFO - Registered parser: StructuredDataParser
2025-08-12 00:20:58,706 - src.services.parser_service - INFO - Registered parser: HtmlCssParser
2025-08-12 00:20:58,706 - src.security.security_service - INFO - mTLS disabled, skipping certificate loading
2025-08-12 00:20:58,710 - src.main - INFO - Flask application initialized
2025-08-12 00:20:58,710 - src.main - INFO - Starting price monitoring scheduler...
2025-08-12 00:20:58,710 - src.services.price_monitor_service - INFO - Scheduled daily price checks at 09:00
2025-08-12 00:20:58,711 - src.services.price_monitor_service - INFO - Price monitoring scheduler started
2025-08-12 00:20:58,711 - src.main - INFO - Price monitoring scheduler started (daily at 09:00)
2025-08-12 00:20:58,711 - src.main - INFO - Scheduled daily logging data cleanup at 02:00
2025-08-12 00:20:58,711 - src.main - INFO - Price Monitor application initialized successfully
2025-08-12 00:20:58,711 - src.main - INFO - Initiating graceful shutdown...
2025-08-12 00:21:03,715 - src.services.price_monitor_service - INFO - Price monitoring scheduler stopped
2025-08-12 00:21:03,716 - src.main - ERROR - Error closing database: 'DatabaseManager' object has no attribute 'close'
2025-08-12 00:21:03,716 - src.main - INFO - Graceful shutdown completed

----------------------------------------

Module: tests.test_product_management_integration
=================================================

FAILURES:
----------
Test: test_error_handling_in_workflow (tests.test_product_management_integration.TestProductManagementIntegration.test_error_handling_in_workflow)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_product_management_integration.py", line 379, in test_error_handling_in_workflow
    self.assertEqual(response.status_code, 400)
AssertionError: 401 != 400

----------------------------------------
Test: test_price_change_calculation (tests.test_product_management_integration.TestProductManagementIntegration.test_price_change_calculation)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_product_management_integration.py", line 356, in test_price_change_calculation
    self.assertEqual(response.status_code, 200)
AssertionError: 401 != 200

----------------------------------------
Test: test_product_deletion_with_confirmation (tests.test_product_management_integration.TestProductManagementIntegration.test_product_deletion_with_confirmation)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_product_management_integration.py", line 201, in test_product_deletion_with_confirmation
    self.assertEqual(response.status_code, 200)
AssertionError: 401 != 200

----------------------------------------
Test: test_product_listing_validation (tests.test_product_management_integration.TestProductManagementIntegration.test_product_listing_validation)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_product_management_integration.py", line 170, in test_product_listing_validation
    self.assertEqual(response.status_code, 400)
AssertionError: 401 != 400

----------------------------------------
Test: test_product_listing_with_filtering_and_sorting (tests.test_product_management_integration.TestProductManagementIntegration.test_product_listing_with_filtering_and_sorting)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_product_management_integration.py", line 122, in test_product_listing_with_filtering_and_sorting
    self.assertEqual(response.status_code, 200)
AssertionError: 401 != 200

----------------------------------------
ERRORS:
--------
Test: test_complete_product_workflow (tests.test_product_management_integration.TestProductManagementIntegration.test_complete_product_workflow)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_product_management_integration.py", line 226, in test_complete_product_workflow
    page_content=PageContent(html="<html>Test</html>", url="https://example.com/new-product")
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: PageContent.__init__() missing 2 required positional arguments: 'status_code' and 'headers'

----------------------------------------

Module: tests.test_api_integration
==================================

FAILURES:
----------
Test: test_add_product_validation (tests.test_api_integration.TestProductAPIIntegration.test_add_product_validation)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_api_integration.py", line 129, in test_add_product_validation
    self.assertEqual(response.status_code, 400)
AssertionError: 401 != 400

----------------------------------------
Test: test_api_endpoints_exist (tests.test_api_integration.TestProductAPIIntegration.test_api_endpoints_exist)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_api_integration.py", line 241, in test_api_endpoints_exist
    self.assertIn(method, route_methods,
AssertionError: 'POST' not found in ['OPTIONS', 'HEAD', 'GET'] : Method POST not found for endpoint /api/products

----------------------------------------
Test: test_get_products_endpoint_structure (tests.test_api_integration.TestProductAPIIntegration.test_get_products_endpoint_structure)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_api_integration.py", line 93, in test_get_products_endpoint_structure
    self.assertEqual(response.status_code, 200)
AssertionError: 401 != 200

----------------------------------------
Test: test_price_update_validation (tests.test_api_integration.TestProductAPIIntegration.test_price_update_validation)
Traceback:
Traceback (most recent call last):
  File "/Users/a/Documents/projects/ai-price-checker/ai-price-checker/tests/test_api_integration.py", line 163, in test_price_update_validation
    self.assertEqual(response.status_code, 400)
AssertionError: 401 != 400

----------------------------------------

